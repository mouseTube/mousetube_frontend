<!--
Created by Nicolas Torquet at 20/12/2023
torquetn@igbmc.fr
Copyright: CNRS - INSERM - UNISTRA - ICS - IGBMC
CNRS - Mouse Clinical Institute
PHENOMIN, CNRS UMR7104, INSERM U964, UniversitÃ© de Strasbourg
Code under GPL v3.0 licence
-->

<template>
 <v-main>
    <v-container>
      <h1><v-icon icon="mdi-cloud-upload"></v-icon> Repositories</h1>
      <v-card class="mt-5" color="grey-lighten-4">
        <v-alert-title class="mt-2 ml-2"><v-icon icon="mdi-information-variant-circle" class="mr-2"></v-icon> To change</v-alert-title>
        <v-card-text>
          We would like to conform to the FAIR (Findable, Accessible, Interoperable, Reusable) principles. According to them,
          several organizations have created repositories to promote Open Data. For instance,
          Zenodo and Dataverse can be used to store data for free and to generate for each of them a DOI (Digital Object Identifier)
          for each of them. DOI are increasingly requested by the publishers to render data available.<br />
          <br />
          If the available data are linked to FAIR repositories, mouseTube will become also FAIR and finally everyone will benefit of this.<br />
          <br />
          On mouseTube, we noticed a number of broken links for shared files. Therefore,
          we strongly recommend to put your files on a scientific repository such as the ones cited above.
          We encourage you to create an account on one of these repositories and store data there instead of on your own server.
          We added a DOI field in the mouseTube database, so that the DOI can be entered in addition of the link.
          For files that are already linked in mouseTube, please check whether the link is still working. If not, please use the link and
          DOI generated by a repository to update the data.
          If you host your files on Zenodo, you can select the mouseTube community (communities section) when you enter your file information.<br />
          Thank you for taking this information into consideration.
        </v-card-text>
      </v-card>


      <v-card class="mt-5">
        <v-card-title>Search a repository</v-card-title>
        <v-card-actions>
          <v-text-field
              placeholder="key word"
              append-inner-icon="mdi-magnify"
              class="ml-2 mr-2"
          ></v-text-field>
            <v-select
                label="Area"
                class="ml-2 mr-2"
            ></v-select>
          <v-btn color="teal">Search</v-btn>
        </v-card-actions>
      </v-card>

      <v-skeleton-loader class="mt-5" type="table-heading, list-item-two-line" v-if="loading">
      </v-skeleton-loader>



      <v-card v-else class="mt-5" v-for="repository in repositories">
        <v-card-title><img :src="repository.logo" :alt="repository.name_repository" /></v-card-title>
        <v-card-subtitle><strong>{{ repository.name_repository }}</strong> - {{ repository.area }}</v-card-subtitle>
        <v-card-item>
            {{ repository.description }}
        </v-card-item>
        <v-divider class="mx-4 mb-1"></v-divider>
        <v-card-actions>
          <v-btn variant="text" color="teal-accent-4">
            <v-icon icon="mdi-link-variant"></v-icon> <a :href="repository.url" target="_blank"> Website</a>
          </v-btn>
          <v-btn variant="text" color="teal-accent-4">
            <v-icon icon="mdi-api"></v-icon> <a :href="repository.url_api" target="_blank">{{ repository.url_api }}</a>
          </v-btn>
        </v-card-actions>
      </v-card>
    </v-container>
 </v-main>
</template>


<script>
import axios from "axios";
export default {
  name: "repositories",
  data: function(){
		return {
      loading: true,
      repositories: [],
      areas: []
    }
  },
  methods: {
    getRepositories() {
      axios.get(`http://127.0.0.1:8000/api/repository`)
          .then(response => {
            this.repositories = response.data
            console.log(this.repositories)
          })
          .catch(error => {
            console.log(JSON.stringify(error))
          })
    },
    getAreas() {
      axios.get(`http://127.0.0.1:8000/api/country`)
          .then(response => {
            this.areas = response.data
            console.log(this.areas)
          })
          .catch(error => {
            console.log(JSON.stringify(error))
          })
    }
  },
  mounted() {
    this.getRepositories()
    this.getAreas()
    this.loading = false
  }
}
</script>


<style scoped>
a{
  text-decoration: none;
  color: teal;
}

a:hover{
  text-decoration: underline;
}
</style>
